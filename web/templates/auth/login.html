{{/*###
Handler=/login
KyutGrill=login2.jpg
DisableHH=true
*/}}
{{ define "tpl" }}
<div class="relative min-h-screen flex items-center justify-center py-12 px-4">
	<!-- Background with pattern/blur -->
	<div class="fixed inset-0 -z-10">
		<div class="absolute inset-0 bg-cover bg-center bg-no-repeat opacity-30"
			style="background-image: url('/static/headers/login2.jpg');"></div>
		<div class="absolute inset-0 bg-dark-bg/80"></div>
		<!-- Decorative grid pattern -->
		<div class="absolute inset-0 opacity-5"
			style="background-image: url('data:image/svg+xml,%3Csvg width=&quot;60&quot; height=&quot;60&quot; viewBox=&quot;0 0 60 60&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot;%3E%3Cg fill=&quot;none&quot; fill-rule=&quot;evenodd&quot;%3E%3Cg fill=&quot;%239C92AC&quot; fill-opacity=&quot;0.4&quot;%3E%3Cpath d=&quot;M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z&quot;/%3E%3C/g%3E%3C/g%3E%3C/svg%3E');">
		</div>
	</div>

	{{ if .Context.User.Username }}
	<div class="bg-dark-card rounded-xl border border-dark-border p-8 max-w-md w-full text-center">
		<i class="fas fa-check-circle text-green-400 text-4xl mb-4"></i>
		<p class="text-gray-300">You're already logged in!</p>
		<a href="/users/{{ .Context.User.ID }}" class="btn-primary inline-block mt-4">Go to Profile</a>
	</div>
	{{ else }}
	<!-- Discord-style login card -->
	<div
		class="bg-dark-card rounded-xl border border-dark-border overflow-hidden flex flex-col lg:flex-row max-w-4xl w-full shadow-2xl">
		<!-- Left side - Form -->
		<div class="flex-1 p-8 lg:p-12">
			<div class="max-w-sm mx-auto lg:mx-0">
				<h1 class="text-3xl font-display font-bold mb-2 text-center lg:text-left">Welcome back to RealistikOsu
				</h1>
				<p class="text-gray-400 mb-8 text-center lg:text-left">btw, sign in first :)</p>

				<form id="login-form" method="post" action="/login" class="space-y-5">
					<div>
						<label class="block text-sm font-medium text-gray-300 mb-2">
							Username
						</label>
						<input type="text" name="username" placeholder="Aika" value="{{ .FormData.username }}" required
							class="w-full bg-dark-bg border border-dark-border rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-primary transition-colors"
							tabindex="1">
					</div>

					<div>
						<label class="block text-sm font-medium text-gray-300 mb-2">
							Password
						</label>
						<input type="password" name="password" placeholder="••••••••••••••••"
							value="{{ .FormData.password }}" required
							class="w-full bg-dark-bg border border-dark-border rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-primary transition-colors"
							tabindex="2">
						<a href="/password-reset" class="text-sm text-primary hover:underline mt-2 inline-block">
							Forgot password?
						</a>
					</div>

					<input type="hidden" name="redir" value="{{ if get .QueryParams " redir" }}{{ get
						.QueryParams "redir" }}{{ else }}{{ if index .FormData "redir" }}{{ index (index
						.FormData "redir" ) 0 }}{{ end }}{{ end }}">
					{{ ieForm }}

					<button type="submit" form="login-form"
						class="w-full bg-primary hover:bg-primary-dark text-white font-medium py-3 px-6 rounded-lg transition-colors"
						tabindex="3">
						Sign in to your account
					</button>
				</form>

				<div class="mt-6 text-center lg:text-left text-gray-400 text-sm">
					<p>Don't have an account? <a href="/register"
							class="text-primary hover:underline font-medium">Register Here!</a></p>
				</div>
			</div>
		</div>

		<!-- Right side - Anime Character -->
		<div class="hidden lg:block w-80 relative bg-gradient-to-br from-dark-card to-dark-bg">
			<div class="absolute inset-0 flex items-end justify-center overflow-hidden">
				<img src="https://i.imgur.com/YbKLkJO.png" alt="Welcome!"
					class="w-full h-auto max-h-full object-contain object-bottom"
					onerror="this.src='https://i.imgur.com/qKNYvXl.png'">
			</div>
		</div>
	</div>
	{{ end }}
</div>
{{ end }}