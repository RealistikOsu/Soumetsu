{{/*###
Handler=/password-reset
DisableHH=true
*/}}
{{ define "tpl" }}
<script src="https://js.hcaptcha.com/1/api.js" async defer></script>

<div class="relative min-h-screen flex items-center justify-center py-12 px-4">
	<!-- Background with blur -->
	<div class="fixed inset-0 -z-10">
		<div class="absolute inset-0 bg-cover bg-center bg-no-repeat opacity-20" 
			style="background-image: url('/static/headers/default.jpg');"></div>
		<div class="absolute inset-0 bg-gradient-to-b from-dark-bg via-dark-bg/90 to-dark-bg"></div>
	</div>

	{{ if .Context.User.ID }}
		<div class="card max-w-md w-full">
			<div class="text-center">
				<p class="text-gray-300">You're already logged in!</p>
			</div>
		</div>
	{{ else }}
		<div class="card max-w-md w-full">
			<h1 class="text-3xl font-display font-bold mb-4">Password Reset</h1>
			
			<div class="bg-blue-900/30 border border-blue-700 rounded-lg p-4 mb-6">
				<p class="text-blue-300 text-sm">
					Forgot your password? Worry not! Here you can reset it. Just tell us your username or email address, and we'll take care of it. You will receive an email at the email address you used to sign up on RealistikOsu!. To continue the password reset procedure, click the link on that email.
				</p>
			</div>

			<form id="pw-reset-form" method="post" action="/password-reset" class="space-y-6">
				<div>
					<label class="block text-sm font-medium text-gray-300 mb-2">
						Username (or email)
					</label>
					<input type="text" 
						name="username" 
						placeholder="eg. RealistikBot" 
						value="{{ .FormData.username }}" 
						required
						class="input-field"
						tabindex="1">
				</div>

				{{ with config "RECAPTCHA_SITE_KEY" .Conf }}
					<div class="flex justify-center">
						<div class="h-captcha" data-sitekey="{{ . }}" data-theme="dark"></div>
					</div>
				{{ end }}

				{{ ieForm }}

				<button type="submit" 
					form="pw-reset-form" 
					class="btn-primary w-full"
					tabindex="2">
					Submit
				</button>
			</form>
		</div>
	{{ end }}
</div>
{{ end }}
