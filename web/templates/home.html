{{/*###
Handler=/
KyutGrill=homepage2.jpg
DisableHH=true
*/}}
{{ define "tpl" }}
{{ $cf := .ClientFlags }}
{{ $ds := band $cf 1 }}

<script>
	window.onlineUsers = parseInt("{{ or (get .Extra "onlineUsers") "0" }}") || 0;
	window.registeredUsers = parseInt("{{ or (get .Extra "registeredUsers") "0" }}") || 0;
</script>

<div id="homepage-app" class="relative min-h-screen">
	<!-- Background with blur -->
	<div class="fixed inset-0 -z-10">
		<div class="absolute inset-0 bg-cover bg-center bg-no-repeat opacity-30"
			style="background-image: url('/static/headers/homepage2.jpg');"></div>
		<div class="absolute inset-0 bg-gradient-to-b from-dark-bg/70 via-dark-bg/90 to-dark-bg"></div>
	</div>

	<!-- Hero Section -->
	<section class="relative py-12 md:py-20">
		<div class="container mx-auto px-4">
			<div class="flex flex-col md:flex-row gap-8 items-center">
				<!-- Left: Character Image -->
				<div class="hidden md:flex w-1/3 relative items-center justify-center min-h-[400px]">
					<!-- Decorative glow effect -->
					<div class="absolute inset-0 bg-gradient-to-r from-primary/20 to-purple-500/20 rounded-full blur-3xl opacity-50"></div>
					<!-- Character image -->
					<div class="relative z-10">
						<img src="/static/image/bina.png" alt="Bina" class="w-full max-w-xs h-auto drop-shadow-2xl">
					</div>
				</div>

				<!-- Right: Content Box -->
				<div class="flex-1 max-w-2xl">
					<div class="bg-dark-card/80 backdrop-blur-sm rounded-xl border border-dark-border p-8 md:p-10">
						<!-- User Stats -->
						<div class="flex items-center gap-4 text-sm text-gray-300 mb-6">
							<div class="flex items-center gap-2">
								<i class="fas fa-users text-primary"></i>
								<span><strong class="text-white">{{ v "addCommas(onlineUsers)" }}</strong> Online</span>
							</div>
							<div class="flex items-center gap-2">
								<i class="fas fa-user-plus text-green-400"></i>
								<span><strong class="text-white">{{ v "addCommas(registeredUsers)" }}</strong> Registered Users</span>
							</div>
						</div>

						<!-- Title -->
						<h1 class="text-4xl md:text-5xl font-display font-bold mb-6">RealistikOsu!</h1>

						<!-- Description -->
						<p class="text-gray-300 mb-8 leading-relaxed">
							RealistikOsu is a custom server for the rhythm game osu!, featuring tons of unique features!
							We provide a nice, safe, unique place for everyone to enjoy, offering a wide variety of new
							experiences and features. We have everything from custom map ranking and clans to dedicated
							leaderboards and PP systems for Relax and Autopilot mods â€” and our feature set grows daily!
							Why hesitate? Join RealistikOsu now!
						</p>

						<!-- CTA Buttons -->
						<div class="flex flex-col sm:flex-row gap-4 mb-6">
							{{ if not .Context.User.ID }}
								<a href="/register" class="btn-primary text-center flex items-center justify-center gap-2">
									<i class="fas fa-user-plus"></i>
									Register Now!
								</a>
							{{ else }}
								<a href="/users/{{ .Context.User.ID }}" class="btn-primary text-center flex items-center justify-center gap-2">
									<i class="fas fa-user"></i>
									Your Profile
								</a>
							{{ end }}
							<a href="/connection" class="btn-secondary text-center flex items-center justify-center gap-2">
								<i class="fas fa-link"></i>
								How to connect?
							</a>
						</div>

						<!-- Activity Graph -->
						<div class="mt-6">
							<div v-if="maxOnline > 0" class="flex items-center justify-center text-xs text-gray-400 mb-3">
								<div class="bg-dark-bg/50 px-4 py-2 rounded-full border border-dark-border">
									<i class="fas fa-chart-line mr-2 text-primary"></i>
									Max. <strong class="text-white">{{ v "maxOnline" }}</strong> players in last 24h
								</div>
							</div>
							<div v-else class="flex items-center justify-center text-xs text-gray-400 mb-3">
								<div class="bg-dark-bg/50 px-4 py-2 rounded-full border border-dark-border">
									<i class="fas fa-chart-line mr-2 text-primary"></i>
									Activity graph
								</div>
							</div>
							<div class="w-full h-2 bg-dark-bg rounded-full overflow-hidden">
								<div class="h-full bg-gradient-to-r from-primary to-blue-400 rounded-full" style="width: 65%;"></div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</section>

	<!-- Statistics Section -->
	<section class="py-16 relative z-10">
		<div class="container mx-auto px-4">
			<div class="mb-8">
				<p class="text-gray-400 text-sm mb-2 italic">So how are statistics on this server?</p>
				<h2 class="text-3xl font-display font-bold">Statistics</h2>
			</div>

			<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
				{{ $modes := slice "osu!standard" "osu!taiko" "osu!catch" "osu!mania" }}
				{{ $modeUrls := slice "std" "taiko" "fruits" "mania" }}
				{{ $icons := slice "fa-circle" "fa-drum" "fa-apple-alt" "fa-keyboard" }}
				{{ $colors := slice "bg-pink-500/20 text-pink-400" "bg-orange-500/20 text-orange-400" "bg-green-500/20 text-green-400" "bg-purple-500/20 text-purple-400" }}
				{{ range $i, $mode := $modes }}
					{{ $modeUrl := index $modeUrls $i }}
					<a href="/leaderboard?m={{ $modeUrl }}" class="card hover:border-primary transition-all duration-300 cursor-pointer group hover:scale-[1.02]">
						<div class="flex items-center justify-between mb-4">
							<div class="w-12 h-12 {{ index $colors $i }} rounded-lg flex items-center justify-center">
								<i class="fas {{ index $icons $i }}"></i>
							</div>
							<i class="fas fa-chevron-right text-gray-500 group-hover:text-primary group-hover:translate-x-1 transition-all"></i>
						</div>
						<h3 class="text-xl font-semibold mb-1">{{ $mode }}</h3>
						<p class="text-sm text-gray-400">View leaderboard</p>
						<div class="mt-3 pt-3 border-t border-dark-border">
							<p class="text-xs text-gray-500">Ranked plays, PP leaderboard</p>
						</div>
					</a>
				{{ end }}
			</div>
		</div>
	</section>

	<!-- Top Plays Section -->
	<section class="py-16 relative z-10">
		<div class="container mx-auto px-4">
			<div class="mb-8">
				<p class="text-gray-400 text-sm mb-2 italic">Alright, let's see if people can do that!</p>
				<h2 class="text-3xl font-display font-bold">Top plays in the server</h2>
			</div>

			<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
				<!-- Loading state -->
				<template v-if="loading">
					<div v-for="i in 8" :key="i" class="card relative overflow-hidden">
						<div class="flex items-center gap-3 mb-3">
							<div class="w-10 h-10 rounded-full bg-dark-border/50 flex items-center justify-center">
								<i class="fas fa-spinner fa-spin text-gray-600"></i>
							</div>
							<div class="flex-1">
								<p class="text-xs text-gray-500">Played by</p>
								<p class="text-gray-400 text-sm">Loading...</p>
							</div>
						</div>
						<div>
							<p class="text-xl font-bold text-gray-600">---pp</p>
							<div class="flex items-center gap-1 text-xs text-gray-500">
								<span class="w-2 h-2 rounded-full bg-gray-600"></span>
								<span>Mode</span>
							</div>
						</div>
					</div>
				</template>

				<!-- Loaded top plays -->
				<template v-else-if="topPlays.length > 0">
					<div v-for="play in topPlays" :key="play.user_id + '-' + play.pp_val"
					   @click="window.location.href='/users/' + play.user_id"
					   class="card hover:border-primary transition-all duration-300 cursor-pointer group relative overflow-hidden hover:scale-[1.02]">
						<!-- Background gradient on hover -->
						<div class="absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-300">
							<div class="w-full h-full bg-gradient-to-br from-primary/10 to-purple-500/10"></div>
						</div>

						<div class="relative z-10">
							<div class="flex items-center gap-3 mb-3">
								<img :src="avatarURL + '/' + play.user_id"
									:alt="play.username"
									class="w-10 h-10 rounded-full border-2 border-dark-border group-hover:border-primary transition-colors">
								<div class="flex-1 min-w-0">
									<p class="text-xs text-gray-400">Played by</p>
									<p class="font-semibold truncate">
										<a :href="'/users/' + play.user_id" class="hover:underline relative z-10" @click.stop>{{ v "play.username" }}</a>
									</p>
								</div>
							</div>

							<div class="flex items-center justify-between">
								<div>
									<p class="text-2xl font-bold text-primary">{{ v "Math.round(play.pp_val)" }}pp</p>
									<div class="flex items-center gap-1 text-xs text-gray-400">
										<span class="w-2 h-2 rounded-full bg-pink-400"></span>
										<span>Vanilla Standard</span>
									</div>
								</div>
								<i class="fas fa-chevron-right text-gray-500 group-hover:text-primary group-hover:translate-x-1 transition-all"></i>
							</div>
						</div>
					</div>
				</template>

				<!-- No top plays -->
				<template v-else>
					<div v-for="i in 8" :key="i" class="card relative overflow-hidden">
						<div class="flex items-center gap-3 mb-3">
							<div class="w-10 h-10 rounded-full bg-dark-border/50 flex items-center justify-center">
								<i class="fas fa-user text-gray-600"></i>
							</div>
							<div class="flex-1">
								<p class="text-xs text-gray-500">Played by</p>
								<p class="text-gray-400 text-sm">No data</p>
							</div>
						</div>
						<div>
							<p class="text-xl font-bold text-gray-600">---pp</p>
							<div class="flex items-center gap-1 text-xs text-gray-500">
								<span class="w-2 h-2 rounded-full bg-gray-600"></span>
								<span>Mode</span>
							</div>
						</div>
					</div>
				</template>
			</div>
		</div>
	</section>

	<!-- Bottom CTA Section -->
	<section class="py-20 relative z-10">
		<div class="container mx-auto px-4">
			<div class="bg-dark-card/80 backdrop-blur-sm rounded-xl border border-dark-border overflow-hidden">
				<div class="flex flex-col md:flex-row md:items-stretch">
					<!-- Left: Content -->
					<div class="flex-1 p-8 md:p-12">
						<h2 class="text-3xl md:text-4xl font-display font-bold mb-4">What are you waiting for?</h2>
						<p class="text-gray-300 mb-8 leading-relaxed max-w-lg">
							Join RealistikOsu! It's risk-free: you won't get your account banned on the official server if you play here.
							You can also switch anytime between the official osu! server and RealistikOsu!
						</p>
						<div class="flex flex-col sm:flex-row gap-4">
							<a href="/register" class="btn-primary text-center flex items-center justify-center gap-2">
								<i class="fas fa-user-plus"></i>
								Register Now!
							</a>
							<a href="/connection" class="btn-secondary text-center flex items-center justify-center gap-2">
								<i class="fas fa-link"></i>
								How to connect?
							</a>
						</div>
					</div>
					<!-- Right: Character Image (Rina) -->
					<div class="hidden md:block w-1/3 relative overflow-hidden">
						<img
					src="/static/image/rina.png"
					class="absolute inset-0 w-full h-full object-cover object-left object-top"
					>
						<div class="absolute inset-0 bg-gradient-to-r from-transparent via-dark-card/35 to-transparent pointer-events-none"></div>
					</div>
				</div>
			</div>
		</div>
	</section>
</div>

<script src="/static/vue/vue.js"></script>
<script src="/static/vue/soumetsu-app.js"></script>
<script src="/static/vue/api-client.js"></script>
<script src="/static/vue/pages/homepage.js"></script>
{{ end }}
